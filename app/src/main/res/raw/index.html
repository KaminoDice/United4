<!doctype html>
<html>
    <head>
        <script>
            var ol = function ol() {
                var spacing = 10;
                var total_width = document.body.clientWidth;
                var running_height = 20;
                var image_height = (total_width - (2 * spacing)) * (102 / 378);
                Array.prototype.slice.call(document.getElementsByClassName("row"), 0).forEach(function(elem) {
                    elem.style.top = running_height + "px";
                    running_height += image_height + spacing;
                    if (elem.classList.contains("one")) {
                        elem.children[0].style.left = spacing + "px";
                        elem.children[0].style.width = (total_width - (2 * spacing)).toString() + "px";
                    } else if (elem.classList.contains("one_one")) {
                        var each_width = (total_width - (3 * spacing))/2;
                        elem.children[0].style.left = spacing + "px";
                        elem.children[0].style.width = each_width.toString() + "px";
                        elem.children[1].style.left = (each_width + (2 * spacing)).toString() + "px";
                        elem.children[1].style.width = each_width.toString() + "px";
                    } else if (elem.classList.contains("one_two")) {
                        var first_width = (total_width - (3 * spacing))/3;
                        elem.children[0].style.left = spacing + "px";
                        elem.children[0].style.width = first_width.toString() + "px";
                        elem.children[1].style.left = (first_width + (spacing * 2)).toString() + "px";
                        elem.children[1].style.width = (first_width * 2).toString() + "px";
                    }
                });
                var theme = "normal";
                var playing = false;
                try {
                    theme = unitedPropertiesIf.getProperty("theme");
                    playing = unitedPropertiesIf.getProperty("is_playing").toUpperCase() == "TRUE";
                    var startup_music = unitedPropertiesIf.getProperty("startup_music").toUpperCase() == "TRUE";
                    console.log("PropertiesSingleton reports startup_music as " + startup_music);
                    console.log("PropertiesSingleton reports playing as " + playing);
                    var opened = unitedPropertiesIf.getSessionVariable("open_phone_played")
                    if (opened != null && opened != undefined && opened.trim().toUpperCase() == "TRUE") {
                        opened = true;
                        console.log("Already opened not playing sound: " + opened)
                    } else {
                        console.log("Playing sound")
                        unitedPropertiesIf.setSessionVariable("open_phone_played", true.toString());
                        unitedPropertiesIf.playSound("open_phone.mp3");
                    }
                    if (startup_music && !playing) {
                        playing = true;
                        console.log("Playing welcome music")
                        unitedPropertiesIf.playSong("Welcome To VA-11 HALL-A", false);
                        unitedPropertiesIf.setProperty("current_song", "Welcome To VA-11 HALL-A");
                    }
                } catch (e) {
                    //
                }
                if (theme == null || theme == undefined || theme.trim().length == 0) {
                    theme = "normal";
                }
                document.body.style.background = "url(\"" + theme + "_home.png\") no-repeat center/cover fixed";
                Array.prototype.slice.call(document.getElementsByTagName("img"), 0).forEach(function(elem) {
                    elem.style.height = image_height.toString() + "px";
                    if (elem.id == "music" && !playing) elem.id = "music2"
                    elem.src = theme + "_" + elem.id + ".png";
                });
                var pn = document.getElementById("patch_notes");
                var pnt = document.getElementById("patch_notes_text");
                pnt.style.left = pn.style.left;
                pnt.style.width = pn.style.width;
                pnt.innerText = unitedPropertiesIf.getProperty("version_notes");
                pnt.style.paddingTop = pnt.style.paddingBottom = (pn.clientHeight / 8).toString() + "px";
                var font_size = pn.clientHeight / 4;
                pnt.style.fontSize = font_size.toString() + "px";
                pnt.style.lineHeight = "1.5";
                while (pnt.clientHeight > pn.clientHeight) {
                    font_size -= 1;
                    pnt.style.fontSize = font_size.toString() + "px";
                }
                pnt.style.top = (pn.style.top + (pn.clientHeight/2) - (pnt.clientHeight/2)).toString() + "px";

            }
            var kira_counter = 0;
            window.kira = function kira() {
                kira_counter++;
                unitedPropertiesIf.toast("Not Implemented Yet (press "+(5 - kira_counter).toString()+" times if you're a developer)")
                if (kira_counter > 4) {
                    unitedPropertiesIf.launchHTML('file:///android_res/raw/kira.html');
                }
            }
        </script>
<style>
    img, .row, #patch_notes_text {
        display: block;
        position: absolute;
    }
    #patch_notes_text {
        text-align: center;
        color: white;
    }
    body {
        margin: 0;
        min-height: 100vh;
        font-family: monospace;
    }
</style>
    </head>
    <body onLoad='ol()'>
        <div class="row one_two">
            <img id="dangeru" onClick="unitedPropertiesIf.launchHTML('https://boards.dangeru.us/mobile')" />
            <img id="patch_notes" onClick="unitedPropertiesIf.launchHTML('file:///android_res/raw/patch_notes.html')" />
            <div id="patch_notes_text" onClick="unitedPropertiesIf.launchHTML('file:///android_res/raw/patch_notes.html')"></div>
        </div>
        <div class="row one_one">
            <img id="ae" onClick="unitedPropertiesIf.launchHTML('https://augmented.dangeru.us/')" />
            <img id="music" onClick='unitedPropertiesIf.launchHTML("file:///android_res/raw/music.html");' />
        </div>
        <div class="row one">
            <img id="save" onClick="unitedPropertiesIf.launchHTML('http://sukeban.moe')" />
        </div>
        <div class="row one_one">
            <img id="camo" onClick="unitedPropertiesIf.launchHTML('file:///android_res/raw/camo.html')" />
            <!--
            <img id="kira" onClick="unitedPropertiesIf.launchHTML('file:///android_res/raw/kira.html')" />
            -->
            <img id="kira" onClick="window.kira()" />
        </div>
    </body>
</html>
